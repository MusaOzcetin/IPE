{
  "program_finder": {
    "description": "MVP Program Finder: simple filters (degree, language), one interests input, GPT evaluation, up to 3 suggestions.",
    "detect_keywords": {
      "en": [
        "program finder",
        "find programs",
        "study program",
        "which program",
        "recommend a program",
        "compare programs",
        "programs for me",
        "discover programs"
      ],
      "de": [
        "programmfinder",
        "studiengang finden",
        "studiengangsuche",
        "studienangebot",
        "welcher studiengang",
        "programme vergleichen",
        "passender studiengang",
        "studiengÃ¤nge entdecken"
      ]
    },
    "questions_set": {
      "degree_type": {
        "type": "enum",
        "values": ["bachelor", "master"],
        "questions": {
          "en": "ðŸ¦‰ Which degree level are you interested in: Bachelor or Master?",
          "de": "ðŸ¦‰ Welches Abschlussniveau interessiert Sie: Bachelor oder Master?"
        },
        "slot": "degree_type"
      },
      "language_constraint": {
        "type": "enum",
        "values": ["english-only", "german-only", "either"],
        "questions": {
          "en": "ðŸ¦‰ Which language of instruction do you prefer or require? (German, English, or either)",
          "de": "ðŸ¦‰ Welche Unterrichtssprache bevorzugen oder benÃ¶tigen Sie? (Deutsch, Englisch oder egal)"
        },
        "slot": "language_constraint",
        "notes": "Do not assume language knowledge; always ask explicitly."
      },
      "field_interest": {
        "type": "free-text",
        "questions": {
          "en": "ðŸ¦‰ What field or interests should the program fit? (e.g., computer science, architecture, sustainability, data, design)",
          "de": "ðŸ¦‰ Welches Fachgebiet oder welche Interessen sollen zum Studiengang passen? (z.â€¯B. Informatik, Architektur, Nachhaltigkeit, Daten, Design)"
        },
        "slot": "field_interest"
      }
    },
    "data_model": {
      "programs_path": "root array of study_program_webpages.json",
      "identity": {
        "primary_key": ["title", "url"],
        "notes": "Program identity is the exact pair (title, url) from the same JSON object. Never invent or modify these values."
      },
      "required_fields": ["title", "url"],
      "guardrails": {
        "no_synthetic_titles": "Do not output any title that does not exactly match a title value from the source objects.",
        "no_synthetic_urls": "Do not output any URL that does not exactly match a url value from the source objects."
      }
    },
    "fields": {
      "title": {
        "source": "study_program_webpages.json",
        "action": "Extract EXACT value of `title` from the candidate object. Do not rewrite or translate."
      },
      "degree": {
        "source": "study_program_webpages.json",
        "action": "Extract the value of `Degree` inside `sections.headings.tables.rows` from the SAME candidate object."
      },
      "language": {
        "source": "study_program_webpages.json",
        "action": "Extract the value of `Language of instruction` inside `sections.headings.tables.rows` from the SAME candidate object."
      },
      "admission": {
        "source": "study_program_webpages.json",
        "action": "Extract the value of `Admission` inside `sections.headings.tables.rows` from the SAME candidate object."
      },
      "url": {
        "source": "study_program_webpages.json",
        "action": "Extract EXACT value of `url` from the candidate object. Do not rewrite, shorten, or rehost."
      },
      "program_overview": {
        "source": "study_program_webpages.json",
        "action": "Summarize factual `paragraphs` under the `Program overview` heading from the SAME candidate object."
      },
      "acquired_skills": {
        "source": "study_program_webpages.json",
        "action": "Summarize factual `paragraphs` under the `Acquired skills` heading from the SAME candidate object, if present."
      }
    },
    "actions": {
      "scan_the_programs": {
        "description": "Load all program objects from study_program_webpages.json as candidates."
      },
      "filter_by_degree": {
        "description": "Keep candidates whose `degree` matches slot `degree_type` (bachelor/master). Read `degree` from fields.degree of the SAME object."
      },
      "filter_by_language": {
        "description": "Apply slot `language_constraint`: english-only â†’ include programs where `language` contains English (or bilingual); german-only â†’ include programs where `language` contains German (or bilingual); either â†’ no filter."
      },
      "gpt_evaluate": {
        "description": "Let GPT, using slot `field_interest` and candidate fields (title, program_overview, acquired_skills), decide which programs fit best. No explicit ranking formula; choose up to 3 results."
      },
      "present_table": {
        "description": "Render a Markdown table for up to 3 programs (0â€“3 allowed) using fields: `title`, `degree`, `duration`, `language`, `admission`, `url`.",
        "constraints": {
          "use_exact_values": ["title", "url"],
          "validation": "Before rendering each row, assert row.title === candidate.title AND row.url === candidate.url; if not, drop the row."
        }
      },
      "present_details": {
        "description": "Show concise details for the selected program using fields: `title`, `degree`, `duration`, `language`, `admission`, `url`, plus a short summary from `program_overview`.",
        "constraints": {
          "use_exact_values": ["title", "url"]
        }
      },
      "present_comparison_table": {
        "description": "Render a Markdown table comparing 2â€“3 selected programs using fields: `title`, `degree`, `duration`, `language`, `admission`, `url`.",
        "constraints": {
          "use_exact_values": ["title", "url"]
        }
      },
      "confirm_reset": {
        "description": "Ask user to confirm restarting Program Finder.",
        "phrases": {
          "en": "Do you want to restart Program Finder?",
          "de": "MÃ¶chten Sie den Programmfinder neu starten?"
        }
      },
      "clear_state": {
        "description": "Clear collected slots and transient state."
      },
      "restart_flow": {
        "description": "Return to the first question in questions_set (degree_type)."
      },
      "handoff_to_general_help": {
        "description": "Exit Program Finder and route to general help.",
        "phrases": {
          "en": "Switching to general TU Berlin help to answer your question.",
          "de": "Wechsel zur allgemeinen TU-Berlin-Hilfe, um Ihre Frage zu beantworten."
        }
      }
    },
    "intents": {
      "program.find": {
        "notes": "Ask minimal questions, apply simple filters, let GPT evaluate fit, and present up to three programs.",
        "ask": ["degree_type", "language_constraint", "field_interest"],
        "actions": [
          "scan_the_programs",
          "filter_by_degree",
          "filter_by_language",
          "gpt_evaluate",
          "present_table"
        ],
        "present": {
          "fields": [
            "title",
            "degree",
            "duration",
            "language",
            "admission",
            "url"
          ]
        }
      },
      "program.detail": {
        "notes": "Provide concise info for a selected program.",
        "inputs": ["selected_program"],
        "actions": ["present_details"],
        "present": {
          "fields": [
            "title",
            "degree",
            "duration",
            "language",
            "admission",
            "url"
          ]
        }
      },
      "program.compare": {
        "notes": "Compare 2â€“3 selected programs side by side with verified facts. Enforce count: 2â€“3.",
        "inputs": ["selected_programs"],
        "actions": ["present_comparison_table"],
        "present": {
          "fields": [
            "title",
            "degree",
            "duration",
            "language",
            "admission",
            "url"
          ]
        },
        "constraints": {
          "selected_programs_count_min": 2,
          "selected_programs_count_max": 3
        }
      },
      "program.reset": {
        "notes": "Clear collected slots and restart Program Finder.",
        "actions": ["confirm_reset", "clear_state", "restart_flow"]
      },
      "program.exit": {
        "notes": "Exit Program Finder and hand off to general help.",
        "actions": ["handoff_to_general_help"]
      }
    },
    "messaging_rules": {
      "bachelor_english_only": {
        "notes": "Inform user about German instruction predominance for Bachelor.",
        "phrases": {
          "en": "All TU Berlin Bachelorâ€™s programs are taught in German. If you require English-only, there is no bachelor option available.",
          "de": "Die meisten BachelorstudiengÃ¤nge an der TU Berlin werden auf Deutsch unterrichtet. Wenn Sie ausschlieÃŸlich Englisch benÃ¶tigen, sind passende Bacheloroptionen mÃ¶glicherweise begrenzt."
        }
      }
    }
  }
}
